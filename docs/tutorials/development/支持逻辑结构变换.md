# 支持逻辑结构变换

逻辑结构变换操作允许用户在张量上进行形状、维度和类型等变换，以适应不同的计算需求。

## 视图和组装

-   视图：视图操作创建对相同基础数据的新张量引用，适用于分块处理和局部计算。

    ```python
    # 视图
    view = pypto.view(tensor, view_shape, offset, valid_shape)
    ```

    示例：

    ```python
    # 创建具有特定形状和偏移量的视图
    view = pypto.view(
        tensor,
        view_shape=[32, 32],
        offset=[10, 20],
        valid_shape=[actual_h, actual_w]  # 可选
    )
    ```

    参数说明：

    -   tensor：源张量
    -   view\_shape：视图的形状
    -   offset：源张量的起始位置
    -   valid\_shape：实际有效尺寸（用于边界处理）

    Tensor支持Python风格的索引和切片，适用于灵活的数据访问。

    ```python
    tensor = pypto.tensor([10, 20], pypto.DT_FP16, "tensor")
    
    # 单个元素（创建视图）
    element = tensor[0, 0]  # 只支持INT32
    
    # 切片（创建视图）
    slice_tensor = tensor[0:5, 10:20]
    
    # 椭圆
    ellipsis_slice = tensor[..., 0:10]
    ```

-   组装：assemble函数在指定的偏移处将较小的张量放入较大的张量，适用于分块处理后的结果合并。

    ```python
    # 将一个小的张量组装成一个大的张量
    pypto.assemble(
        small_tensor,      # 源张量
        offsets=[10, 20],  # 目标位置
        large_tensor       # 目标张量
    )
    ```

    示例：

    ```python
    # 小张量结果
    tile_result = pypto.tensor([32, 32], pypto.DT_FP16, "tile")
    
    # 大输出张量
    output = pypto.tensor([100, 200], pypto.DT_FP16, "output")
    
    # 在 [10, 20] 位置组装输出张量
    pypto.assemble(tile_result, [10, 20], output)
    ```

## 重塑形状/维度

```python
# 重塑张量
reshaped = pypto.reshape(tensor, [new_shape])

# 转置
transposed = pypto.transpose(tensor, dim0=0, dim1=1)
```

重塑不会改变数据，只会改变尺寸的视图。

## 类型转换

```python
# 转换为不同的数据类型
result = pypto.cast(tensor, pypto.DT_FP32, mode=pypto.CastMode.CAST_NONE)
```

