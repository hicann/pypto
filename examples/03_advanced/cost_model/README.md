# 系统级分析与优化样例 (System-level Analysis)

本目录展示了 PyPTO 在系统层面的分析、评估与优化工具。

## 总览介绍

在算子开发完成后，性能分析（Profiling）是必不可少的环节。本目录涵盖了：
- **Cost Model**: 演示如何利用 PyPTO 的成本模型在仿真环境下评估算子的执行效率，并生成可视化分析结果。

## 样例代码特性

- **可视化分析**: 展示如何生成泳道图（Swimlane Diagram），直观查看硬件单元（如 Vector, Cube, MTE）的调度与执行情况。
- **仿真执行**: 展示了如何在没有实际 NPU 硬件的情况下，通过成本模型模拟算子在昇腾架构上的执行开销。
- **瓶颈识别**: 帮助开发者通过数据量化的方式，识别算子中的内存受限（Memory-bound）或计算受限（Compute-bound）环节。

## 代码结构

- **`cost_model.py`**: 一个基于 Softmax 的成本分析示例，展示了如何配置和运行成本模型仿真。

## 运行方法

### 执行脚本

成本模型通常可以在 CPU 环境下运行仿真：

```bash
python3 cost_model.py
```

执行后，结果通常会保存在 `./output` 目录下的 JSON 文件中，可以使用 PyPTO ToolKit 工具打开查看。

## 注意事项

- Cost Model提供的是仿真结果，虽然具有极高的参考价值，但最终性能仍需在真实 NPU 硬件上进行验证。
- 生成的泳道图文件较大，建议在分析时重点关注计算密集型的循环段落。

